(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/tabbar-1/tabbar-1"],{"00b0":function(t,e,n){"use strict";n.r(e);var a=n("2c30"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=o.a},"0cdb":function(t,e,n){},"2c30":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=u(n("a34a")),o=n("3d9b"),i=n("5d7f");function u(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,a,o,i,u){try{var s=t[i](u),r=s.value}catch(c){return void n(c)}s.done?e(r):Promise.resolve(r).then(a,o)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(a,o){var i=t.apply(e,n);function u(t){s(i,a,o,u,r,"next",t)}function r(t){s(i,a,o,u,r,"throw",t)}u(void 0)})}}var c={data:function(){return{address:"",latitude:"",longitude:"",mapContext:{},called:!1,callout:{bgColor:"red"},covers:[],adv:{far:0,title:"",desc:"",img:"/static/img/icon/avatar.jpg",tag:""},adv_bottom:[],mainItem:null,id:"",type:"",showCoupon:!1}},onShow:function(){},onLoad:function(e){var n=this;e.showCoupon&&(this.showCoupon=!0),this.mapContext=t.createMapContext("map",this),this.id=t.getStorageSync("index_id"),this.type=t.getStorageSync("index_type"),t.getLocation({type:"gcj02",success:function(e){t.request({header:{"Content-Type":"application/text"},url:"https://apis.map.qq.com/ws/geocoder/v1/?location="+e.latitude+","+e.longitude+"&key=MVGBZ-R2U3U-W5CVY-2PQID-AT4VZ-PDF35",success:function(t){200===t.statusCode&&(n.address=t.data.result.address)}}),n.latitude=e.latitude,n.longitude=e.longitude},complete:function(t){n.loadData()}})},methods:{loadData:function(){var t=r(a.default.mark(function t(){return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getAdvOfIndex();case 2:if(!this.id||!this.type){t.next=5;break}return t.next=5,this.getCalllMsg();case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),cancleCall:function(){this.called&&(this.mainItem=null)},changeData:function(t){var e=t.split("=");if(2==e.length){var n=e[1].split("_");this.id=n[0],this.type=n[1]}this.id&&this.type&&this.getCalllMsg()},changePosition:function(){this.mapContext.moveToLocation()},openScan:function(){var e=this;t.scanCode({onlyFromCamera:!0,success:function(t){e.changeData(t.result)}})},navicateToPath:function(e){t.navigateTo({url:"/"+e})},chooseLocation:function(e,n){t.openLocation({latitude:parseFloat(e),longitude:parseFloat(n),success:function(){console.log("success")}})},getAdvOfIndex:function(){var t=this;return new Promise(function(e){(0,o.request)(i.getAdvOfIndex,{},function(n){200==n.code&&(t.adv=n.result.adv,t.adv.far=(0,o.geoDistance)(t.adv.latitude,t.adv.longitude,t.latitude,t.longitude),t.adv_bottom=n.result.adv_bottom),e()})})},getCalllMsg:function(){var e=this;return new Promise(function(n){(0,o.request)(i.getCalllMsg,{id:e.id,type:e.type},function(a){450==a.code?t.navigateTo({url:"../callPhone/callPhone?id="+e.id+"&type="+e.type}):204==a.code?t.switchTab({url:"../tabbar-5/tabbar-5"}):200==a.code?e.mainItem=a.result:(0,o.showToast)(a.msg),n()})})},bindPhone:function(){var e=this;(0,o.request)(i.bindPhone,{id:this.id,type:this.type},function(n){200==n.code&&(t.makePhoneCall({phoneNumber:n.result}),e.called=!0)})},sendMoveCarMsg:function(){(0,o.request)(i.sendMoveCarCode,{id:this.id,type:this.type,address:this.address,msg:"挡住了道路，请挪下车"},function(t){200==t.code?(0,o.showToast)("短信发送成功"):(0,o.showToast)(t.msg)})},callAdvPhone:function(e){t.makePhoneCall({phoneNumber:e})},navToWebView:function(e,n){t.navigateTo({url:"../web-view/web-view?id="+e+"&title="+n})},navToSendCard:function(){t.navigateTo({url:"../sendCard/sendCard"})},unShowCoupon:function(){this.showCoupon=!1},onShareAppMessage:function(t){return{title:"多少堵车事，历历不能忘",imageUrl:"/static/img/icon/share.jpg"}}}};e.default=c}).call(this,n("543d")["default"])},8442:function(t,e,n){"use strict";var a=n("0cdb"),o=n.n(a);o.a},9042:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o})},9321:function(t,e,n){"use strict";n.r(e);var a=n("9042"),o=n("00b0");for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);n("8442");var u=n("2877"),s=Object(u["a"])(o["default"],a["a"],a["b"],!1,null,"1ac0a1a4",null);e["default"]=s.exports}},[["eefa","common/runtime","common/vendor"]]]);