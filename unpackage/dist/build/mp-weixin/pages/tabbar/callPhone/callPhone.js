(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/callPhone/callPhone"],{"186b":function(e,t,n){"use strict";n.r(t);var i=n("ad6a"),a=n("e8e6");for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);n("c41e");var o=n("2877"),h=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,"03148dac",null);t["default"]=h.exports},ad6a:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})},c41e:function(e,t,n){"use strict";var i=n("cc5b"),a=n.n(i);a.a},cc5b:function(e,t,n){},e8e6:function(e,t,n){"use strict";n.r(t);var i=n("f23e"),a=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);t["default"]=a.a},f23e:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("5d7f"),a=n("3d9b"),s={data:function(){return{yanzhengStart:!1,yanzhengTime:0,yanzhengCode:null,code:0,showBack:!1,showCarMsg:!1,showCarSecondMsg:!1,cards:"",prefix:"",bindPrefix:"浙",bindCard:"",phone:"",fName:"",Timer:null,address_code:"",id:null,type:1,needBindUser:!0,messageIsShow:!1,choosedSex:1,placeList:["京","津","沪","渝","冀","吉","辽","黑","湘","鄂","甘","晋","陕","豫","川","云","桂","蒙","贵","青","藏","新","宁","粤","琼","闽","苏","浙","赣","鲁","皖"],yzFocus:!1,carList:[],carListSecond:[],xinghao:"选填",car_id:0,needPay:!1}},onLoad:function(e){this.type=e.type,this.id=e.id},onShow:function(){this.getCarList()},computed:{showLight:function(){return 7==this.bindCard.length?"/static/img/icon/light.png":"/static/img/icon/unlight.png"},leftSexStatus:function(){return 1==this.choosedSex?"name-choose-left":"name-choose-right"},rightSexStatus:function(){return 2==this.choosedSex?"name-choose-left":"name-choose-right"}},methods:{changeSex:function(e){this.choosedSex=e},showModel:function(){this.showBack=!0},cancleBack:function(){this.showBack=!1},chooseItem:function(e){this.bindPrefix=e,this.showBack=!1},setCard:function(e){var t=/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi;t.exec(e.detail.value)&&(0,a.showToast)("车牌号中不应该包含中文"),this.bindCard=e.detail.value.toUpperCase()},getPhoneNumber:function(e){console.log(e)},getCode:function(){var e=this;if(!this.yanzhengStart){if(!this.phone)return void(0,a.showToast)("您还未输入手机号");(0,a.request)(i.getYanZhengCode,{phone:this.phone},function(t){200==t.code&&(e.yanzhengStart=!0,e.yanzhengTime=30,e.Timer=setInterval(e.timeGone,1e3),e.code=t.result,e.yzFocus=!0)})}},getCarList:function(){var e=this;(0,a.request)(i.getCarList,{},function(t){200==t.code&&(e.carList=t.result)})},changeSecondCar:function(e){var t=this;(0,a.request)(i.getCarListSecond,{parentid:e},function(e){200==e.code&&(t.carListSecond=e.result,t.showCarSecondMsg=!0)})},timeGone:function(){this.yanzhengTime-=1,0==this.yanzhengTime&&(this.yanzhengStart=!1,clearInterval(this.Timer))},inputPhone:function(e){this.phone=e.detail.value},inputFName:function(e){this.fName=e.detail.value},inputYanzhengCode:function(e){this.yanzhengCode=e.detail.value},bindCardAndPayMoney:function(){if(this.bindPrefix)if(this.bindCard){var e=/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi;e.exec(this.bindCard)?(0,a.showToast)("车牌号中不应该包含中文"):this.phone?this.yanzhengCode?this.fName?this.yanzhengCode==this.code?this.bindCardAndPay():(0,a.showToast)("验证码错误！"):(0,a.showToast)("您还填写车主称呼"):(0,a.showToast)("您还未填写验证码"):(0,a.showToast)("您还未输入手机号")}else(0,a.showToast)("您还未填写车牌");else(0,a.showToast)("您还未选择车牌前缀")},bindCardConfirm:function(){if(this.bindPrefix)if(this.bindCard){var e=/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi;e.exec(this.bindCard)?(0,a.showToast)("车牌号中不应该包含中文"):this.phone?this.yanzhengCode?this.fName?this.yanzhengCode==this.code?2==this.type?this.addCarCardAndBind():this.addCard():(0,a.showToast)("验证码错误！"):(0,a.showToast)("您还填写车主称呼"):(0,a.showToast)("您还未填写验证码"):(0,a.showToast)("您还未输入手机号")}else(0,a.showToast)("您还未填写车牌");else(0,a.showToast)("您还未选择车牌前缀")},bindCardAndPay:function(){(0,a.request)(i.bindCardAndPay,{card:this.bindCard,phone:this.phone,prefix:this.bindPrefix,fName:this.fName,sex:this.choosedSex,card_id:this.id,car_id:this.car_id},function(t){200==t.code&&e.requestPayment({provider:"wxpay",timeStamp:t.result.timeStamp,nonceStr:t.result.nonceStr,package:t.result.package,signType:t.result.signType,paySign:t.result.paySign,success:function(t){(0,a.showToast)("支付成功！"),setTimeout(function(){e.switchTab({url:"../tabbar-1/tabbar-1?showCoupon=1"})},1e3)},fail:function(e){(0,a.showToast)("您未支付，无法激活")}})})},addCarCardAndBind:function(){(0,a.request)(i.addCarCardAndBindUser,{card:this.bindCard,phone:this.phone,prefix:this.bindPrefix,fName:this.fName,sex:this.choosedSex,card_id:this.id,car_id:this.car_id},function(t){200==t.code?((0,a.showToast)("绑定成功","success"),e.switchTab({url:"../tabbar-1/tabbar-1?showCoupon=1"})):900==t.code&&e.showModal({title:"提示",content:"您已经绑定了挪车码，如果还要继续绑定此挪车码需要先去个人中心取消绑定，是否前去个人中心",success:function(t){t.confirm?e.switchTab({url:"../tabbar-5/tabbar-5"}):t.cancel}})})},addCard:function(){(0,a.request)(i.addCarCard,{card:this.bindCard,phone:this.phone,prefix:this.bindPrefix,fName:this.fName,sex:this.choosedSex,car_id:this.car_id},function(t){200==t.code&&((0,a.showToast)("添加成功","success"),e.navigateBack({delta:1}))})},chooseCar:function(e,t){this.car_id=e,this.xinghao=t,this.showCarMsg=!1},changeShowCarMsg:function(){this.showCarMsg=!0}}};t.default=s}).call(this,n("543d")["default"])}},[["59f5","common/runtime","common/vendor"]]]);